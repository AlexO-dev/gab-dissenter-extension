/* Automatically generated file. Do not edit directly.
Copyright (C) 2019 Gab AI, Inc.
All Rights Reserved */
var BROWSER_CONFIG={name:"Mozilla Firefox",slug:"firefox",version:"0.1.2"},BROWSER_CHROME_SLUG="chrome",BROWSER_FIREFOX_SLUG="firefox",BROWSER_EDGE_SLUG="edge",BROWSER_SAFARI_SLUG="safari",BASE_URI="https://dissenter.com/discussion/begin-extension?url=",BACKGROUND_ACTION_OPEN_POPUP="open_popup",COLOR_GAB_GREEN="#21cf7b",isObject=function(e){return!isArray(e)&&!isDate(e)&&(null!==e&&"object"==typeof e)},isString=function(e){return"string"==typeof e||e instanceof String},isDate=function(e){return!isString(e)&&!isArray(e)&&null!=e&&null!=e&&(e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e))},isArray=function(e){return Array.isArray(e)};function ready(e){var n=document;"loading"==n.readyState?n.addEventListener("DOMContentLoaded",e):e()}function getQueryStringValue(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var timeout=null,delay=2e3,Sidebar=function(){var r=this,o=document.getElementById("sidebar-iframe"),a="";r.onSidebarOpen=function(e){if(!isObject(e))return!1;var n=e.url||"";if(a===n)return r.toggleLoading(!1),!1;var t=encodeURIComponent(a=n),i=BASE_URI+t;o.setAttribute("src",i),setTimeout(function(){r.toggleLoading(!1)},500)},r.init=function(){BROWSER_CONFIG.slug===BROWSER_FIREFOX_SLUG&&browser.tabs.query({active:!0,currentWindow:!0},function(e){if(!e)return!1;var n=e[0];r.onSidebarOpen(n)})},r.toggleLoading=function(e){o.classList.toggle("hidden",e)}},sidebar=null;function handleReload(){sidebar||(sidebar=new Sidebar),sidebar.toggleLoading(!0),null!==timeout&&clearTimeout(timeout),timeout=setTimeout(function(){sidebar.init()},delay)}document.addEventListener("DOMContentLoaded",function(){(sidebar=new Sidebar).init()}),browser.tabs.onActivated.addListener(handleReload),browser.tabs.onUpdated.addListener(handleReload);